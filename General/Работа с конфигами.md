## Основные положения

- **ИСПОЛЬЗОНИЕ ПРАВИЛЬНОЙ ИЕРАРХИИ ПРИОРИТЕТОВ ИСТОЧНИКОВ**
	От высшего к низшему:
	1. Флаги командной строки
	2. Переменные окружения
	3. Конфигурационный файл (YAML/JSON/TOML)
	4. Значения по умолчанию в коде

- **ВАЛИДАЦИЯ СТРУКТУРЫ**
	Обязательная проверка всех полей после загрузки:
```go
	type Config struct {
    Port int `validate:"required,min=1024,max=65535"`
}
```

- **РАЗДЕЛЕНИЕ ПО ОКРУЖЕНИЯМ**
```bash
config/
├── config.yaml          # базовые настройки
├── config.development.yaml
├── config.production.yaml
└── config.test.yaml
```


- **БЕЗОПАСНОСТЬ СЕКРЕТОВ**
**Никогда** не коммитить секреты в Git - использовать .gitignore
```.gitignore
config.yaml
*.local.yaml
.env
```

- **IMMUTABLE конфиг после загрузки**
```go
var appConfig *Config // только для чтения после инициализации
```

- **ЛОГИРОВАНИЕ ТОЛЬКО БЕЗОПАСНЫХ ПОЛЕЙ КОНФИГА**
```go
log.Printf("Запуск приложения: порт=%d, debug=%v", cfg.Port, cfg.Debug)
// НЕ логируйте: cfg.Database.Password, cfg.JWTSecret
```


## Ошибки в работе с конфигами
| Ошибка                       | Последствия                                      | Решение                                                           |
| ---------------------------- | ------------------------------------------------ | ----------------------------------------------------------------- |
| Секреты в репозитории        | Утечка ключей, доступ к БД                       | Использовать `.env` + `.gitignore` + шаблон `config.example.yaml` |
| Отсутствие валидации         | Паника при запуске из-за невалидного порта       | Валидация через `validator` сразу после загрузки                  |
| Жёсткие пути к файлам        | Приложение не запускается вне IDE                | Использовать относительные пути + флаг `--config`                 |
| Игнорирование env vars       | Невозможно переопределить параметры в Docker/K8s | Приоритет env vars над файлами                                    |
| Изменяемый конфиг в рантайме | Гонки данных в конкурентных приложениях          | Конфиг как `const` после инициализации                            |
| Нет значений по умолчанию    | Обязательное наличие всех полей в файле          | Установка дефолтов через `viper.SetDefault()`                     |
