**API Gateway** (или API-шлюз) — это  «единая точка входа» для всех запросов от клиентов (мобильных приложений, сайтов) к  внутренним сервисам.

> Если представить ваше приложение как большой ресторан, то API Gateway — это **хостес или администратор** на входе. Он встречает гостя, проверяет бронь (авторизация), подсказывает, куда пройти (маршрутизация), и следит, чтобы в зал не зашло слишком много людей одновременно (ограничение нагрузки).


### Основные функции API Gateway

В современной микросервисной архитектуре приложение состоит из десятков мелких сервисов (сервис заказов, сервис оплаты, сервис пользователей). Без шлюза клиенту пришлось бы знать адреса всех этих сервисов и стучаться в каждый отдельно.

API Gateway берет на себя «грязную» работу:

- **Маршрутизация (Routing):** Перенаправляет запрос на нужный микросервис. Например, запрос `example.com/orders` уходит в сервис заказов, а `example.com/users` — в сервис профилей.
- **Аутентификация и безопасность:** Проверяет токены или ключи доступа. Если запрос подозрительный, он даже не дойдет до внутренних серверов.
    
- **Лимитирование (Rate Limiting):** Ограничивает количество запросов от одного пользователя в секунду, чтобы серверы не «легли» от перегрузки или DDOS-атаки.
    
- **Агрегация данных:** Может собрать данные из трех разных сервисов и выдать клиенту один готовый ответ (вместо того, чтобы телефон пользователя делал три отдельных запроса).
    
- **Трансформация протоколов:** Например, клиент общается по HTTP/JSON, а внутренние сервисы — по более быстрому gRPC. Шлюз «переведет» запрос на лету.

### API Gateway vs Load Balancer

Их часто путают, но задачи у них разные:

|**Характеристика**|**Load Balancer (Балансировщик)**|**API Gateway (Шлюз)**|
|---|---|---|
|**Главная цель**|Равномерно распределить трафик.|Управлять доступом к функциям API.|
|**Уровень работы**|Работает «ниже» (уровни L4/L7).|Работает «выше» (уровень приложения L7).|
|**Логика**|«Раскидай эти 1000 запросов по 5 серверам».|«Проверь токен, найди сервис и отдай JSON».|


### Когда сервер становится API Gateway?

Вы можете превратить обычное серверное приложение в API Gateway, если оно начнет выполнять следующие функции:

1. **Проксирование:** Вместо того чтобы самому лезть в базу, оно делает HTTP-запрос к другому серверу.
    
2. **Централизованная авторизация:** Оно проверяет права доступа для всех входящих запросов в системе.
    
3. **Агрегация:** Оно делает запросы в три разных сервиса и собирает их ответы в один аккуратный JSON для клиента.
    

> **Важно:** В современных системах стараются разделять эти роли. Использование обычного бэкенда (например, на Node.js) в качестве шлюза называют **«BFF» (Backend For Frontend)**. Это подвид API Gateway, заточенный под конкретный тип клиента (например, отдельный шлюз для мобильного приложения и отдельный для сайта).