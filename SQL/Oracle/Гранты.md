**Грант** (GRANT) — это механизм управления доступом, позволяющий администратору или владелец объекта передавать **привилегии** другим пользователям или ролям.

Привилегии делятся на:
- **Системные** — разрешения на выполнение действий на уровне всей СУБД (например, `CREATE SESSION`, `CREATE TABLE`).
- **Объектные** — права на конкретные объекты (таблицы, представления, процедуры и т.д.), например `SELECT`, `INSERT`, `EXECUTE`.


### Синтаксис команды GRANT
```sql
GRANT привилегия [, привилегия ...]
ON [объект]
TO {пользователь | роль | PUBLIC}
[WITH GRANT OPTION];
```
> `WITH GRANT OPTION` позволяет получателю гранта передавать эту привилегию дальше.


- Можно назначить роль пользователю 
- Можно назначить роль другой роли
- можно назначать права на какие-либо действия пользователю/роли.
 - можно назначать права всем пользователям/ролям (для обозначения ВСЕХ используется слово PUBLIC)






	-	SELECT 		Возможность выполнения SELECT на таблице
	-	INSERT 		Возможность выполнения INSERT на таблице
	-	UPDATE 		Возможность выполнения UPDATE на таблице
	-	DELETE 		Возможность выполнения DELETE на таблице
	-	REFERENCES 	Возможность создавать CONSTRAINT, который ссылается на таблицу.
	-	ALTER 		Возможность выполнять оператор ALTER TABLE, чтобы изменить описание таблицы.
	-	INDEX 		Возможность создавать INDEX таблице с помощью оператора CREATE INDEX.
	-	ALL 		Все привилегии для таблицы
	-	EXECUTE 	ВОзможность запускать на выполнение функции и процедуры




### Сводная таблица типов грантов
| **Тип гранта**                                           | **Кому можно назначить / отозвать**              | **Описание**                                                                                                                                                                             | **Пример SQL**                                                                                                                    |
| -------------------------------------------------------- | ------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------- |
| **Системные привилегии**                                 | Пользователь, роль                               | Дают право выполнять действия на уровне всей СУБД (не привязаны к конкретному объекту). Примеры: `CREATE SESSION`, `CREATE TABLE`, `DROP ANY VIEW`.                                      | `GRANT CREATE SESSION TO analyst;`<br>`REVOKE CREATE TABLE FROM developer;`                                                       |
| **Объектные привилегии**                                 | Пользователь, роль, `PUBLIC`                     | Дают право выполнять операции над **конкретным объектом** (таблицей, представлением, процедурой и т.д.). Примеры: `SELECT`, `INSERT`, `UPDATE`, `DELETE`, `EXECUTE`.                     | `GRANT SELECT ON hr.employees TO user1;`<br>`REVOKE EXECUTE ON pkg_utils FROM app_role;`                                          |
| **Роли (Roles)**                                         | Пользователь, другая роль                        | Роль — это именованный набор привилегий. Её можно назначить пользователю или другой роли для упрощения управления доступом.                                                              | `GRANT report_reader TO analyst;`<br>`REVOKE data_editor FROM junior_dev;`                                                        |
| **WITH ADMIN OPTION** (для ролей и системных привилегий) | —                                                | Разрешает получателю **назначать эту системную привилегию или роль другим**, но **не передаёт право автоматически при отзыве**.                                                          | `GRANT CREATE VIEW TO dev_user WITH ADMIN OPTION;`<br>`GRANT dba_role TO sec_admin WITH ADMIN OPTION;`                            |
| **WITH GRANT OPTION** (для объектных привилегий)         | —                                                | Разрешает получателю **передавать эту объектную привилегию другим пользователям или ролям**. При отзыве у первоначального получателя — переданные права **не отзываются автоматически**. | `GRANT SELECT ON sales.orders TO manager WITH GRANT OPTION;`<br>`-- manager может теперь: GRANT SELECT ON sales.orders TO clerk;` |
| **GRANT на PUBLIC**                                      | Только `PUBLIC` (специальный псевдопользователь) | Выдаёт привилегию **всем пользователям** базы. Используется редко из-за соображений безопасности.                                                                                        | `GRANT EXECUTE ON common_pkg TO PUBLIC;`<br>`REVOKE SELECT ON public_data FROM PUBLIC;`                                           |

### Основные случаи и примеры

**Задача**: Разрешить пользователю подключаться к базе.
```sql
-- Выполняется от имени SYS или другого привилегированного пользователя
GRANT CREATE SESSION TO user1;
```

> Без этого пользователь не сможет подключиться даже если его аккаунт существует.


**Задача**: Разрешить пользователю `user2` читать данные из таблицы `employees`, принадлежащей `hr`.
```sql
-- Выполняется от имени владельца таблицы (hr)
GRANT SELECT ON hr.employees TO user2;
```


**Задача**: Разрешить пользователю вставлять, обновлять и читать данные в таблице `orders`.
```SQL
GRANT SELECT, INSERT, UPDATE ON sales.orders TO analyst;
```


**Задача**: Разрешить пользователю `dev` изменять структуру своей таблицы `logs`.
```SQL
GRANT ALTER ON hr.departments TO dev;
```
>  Примечание: `ALTER` на собственные объекты обычно разрешён по умолчанию. Но если нужно дать `ALTER` на чужую таблицу — это возможно, но редко используется.



**Задача**: Разрешить пользователю `cleaner` удалять записи из таблицы `temp_data`.
```SQL
GRANT DELETE ON app.temp_data TO cleaner;
```


**Задача**: Разрешить вызов пакета `hr.payroll_pkg`.
```SQL
GRANT EXECUTE ON hr.payroll_pkg TO accountant;
```



**Задача**: Создать роль `reporter` и выдать ей права, затем назначить роль пользователю.
```SQL
-- Создание роли
CREATE ROLE reporter;

-- Выдача привилегий роли
GRANT SELECT ON hr.employees TO reporter;
GRANT SELECT ON hr.departments TO reporter;

-- Назначение роли пользователю
GRANT reporter TO user3;
```


**Задача**: Разрешить пользователю создавать таблицы.
```SQL
GRANT CREATE TABLE TO developer;
```
> Необходимо также убедиться, что у пользователя есть квота на табличное пространство.
```SQL
ALTER USER developer QUOTA 100M ON users;
```


**Задача**: Разрешить `user_a` не только читать таблицу, но и выдавать это право другим.
```SQL
GRANT SELECT ON project.tasks TO user_a WITH GRANT OPTION;
```
> Теперь `user_a` может:
```SQL
GRANT SELECT ON project.tasks TO user_b;
```

**Задача**: Отозвать право на обновление таблицы.
```SQL
REVOKE UPDATE ON sales.orders FROM analyst;
```
> Если у пользователя было несколько привилегий, остальные сохраняются.

