
### Описание таблиц

| **Таблица**         | **Краткое описание**                                                                                                                              |
| ------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------- |
| **projects**        | Основная таблица для хранения информации о **проектах** (название, описание, статус, идентификатор и т.д.).                                       |
| **issues**          | Основная таблица для хранения информации о **задачах** (тикеты, вопросы, баги), связанных с проектами.                                            |
| **users**           | Таблица для хранения данных **пользователей** Redmine (логин, хэш пароля, имя, email, статус).                                                    |
| **trackers**        | Определяет **типы задач** (например, "Баг", "Функция", "Поддержка"). Связана с таблицей `issues`.                                                 |
| **issue_statuses**  | Определяет возможные **статусы задач** (например, "Новый", "В работе", "Закрыт"). Связана с таблицей `issues`.                                    |
| **priorities**      | Определяет **приоритеты** задач (например, "Низкий", "Высокий", "Срочный"). Связана с таблицей `issues`.                                          |
| **versions**        | Определяет **версии** (вехи, релизы) проекта, к которым могут быть привязаны задачи.                                                              |
| **member_roles**    | связка many2many между таблицами **users** и **roles**                                                                                            |
| **members**         | Определяет **участников** (пользователей) проекта и их **роли**. Таблица связи many2many между `projects` и `users`.                              |
| **roles**           | Определяет **роли** в проекте (например, "Разработчик", "Менеджер", "Тестировщик") и их **права доступа**.                                        |
| **attachments**     | Хранит информацию о **вложениях** (файлах), прикрепленных к задачам, проектам или другим объектам.                                                |
| **journals**        | Хранит **общую историю изменений** задач: комментарии, изменения полей (кто, когда, к чему)                                                       |
| **journal_details** | Хранит **конкретные изменения полей**                                                                                                             |
| **custom_values**   | позволяет хранить произвольные данные, добавленные администратором, для различных типов объектов, не изменяя при этом основную схему базы данных. |


#### ### Таблица: `projects`

| **Столбец**     | **Описание**                                                                                                             |
| --------------- | ------------------------------------------------------------------------------------------------------------------------ |
| **id**          | Первичный ключ (PK). Уникальный идентификатор проекта.                                                                   |
| **name**        | Название проекта.                                                                                                        |
| **description** | Подробное описание проекта.                                                                                              |
| **status**      | Статус проекта: 1-активен; 5-закрыт(доступен для просмотра); 9-архивирован(скрыт из общих списков и полностью неактивен) |
| **identifier**  | Уникальный текстовый идентификатор (slug) проекта.                                                                       |
| **parent_id**   | Внешний ключ (FK) на `projects.id`, для иерархии проектов (подпроектов).                                                 |

#### Таблица: `issues`

| **Столбец**                   | **Описание**                                                                              |
| ----------------------------- | ----------------------------------------------------------------------------------------- |
| **id**                        | Первичный ключ (PK). Уникальный идентификатор задачи.                                     |
| **project_id**                | Внешний ключ (FK) на `projects.id`. Проект, к которому относится задача.                  |
| **tracker_id**                | Внешний ключ (FK) на `trackers.id`. Тип задачи.                                           |
| **status_id**                 | Внешний ключ (FK) на `issue_statuses.id`. Текущий статус задачи.                          |
| **priority_id**               | Внешний ключ (FK) на `priorities.id`. Приоритет задачи.                                   |
| **subject**                   | Тема/краткое описание задачи.                                                             |
| **description**               | Подробное описание задачи.                                                                |
| **assigned_to_id**            | Внешний ключ (FK) на `users.id`. Исполнитель задачи.                                      |
| **author_id**                 | Внешний ключ (FK) на `users.id`. Автор задачи.                                            |
| **fixed_version_id**          | Внешний ключ (FK) на `versions.id`. Версия, в которой планируется исправление/реализация. |
| **root_id**, **lft**, **rgt** | Столбцы для хранения иерархии (вложенности) задач (древовидная структура).                |
| **due_date**                  | Срок выполнения.                                                                          |
|                               |                                                                                           |

#### Таблица `journals`
| **Столбец**          | **Тип данных** | **Описание**                                                                                                                                                                                                                    | **Связи**                                                  |
| -------------------- | -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------- |
| **id**               | `INT`          | **Первичный ключ (PK).** Уникальный идентификатор записи журнала (изменения/комментария).                                                                                                                                       | —                                                          |
| **journalized_id**   | `INT`          | **Внешний ключ (FK).** Идентификатор объекта, к которому относится изменение. _Например, `issues.id`._                                                                                                                          | Ссылается на `id` объекта, например, задачи.               |
| **journalized_type** | `VARCHAR`      | **Тип объекта.** Указывает, к какой таблице относится запись: <br>- `Issue` - связана с `issues`<br>-`Project`                                                                                                                  | Определяет таблицу, на которую ссылается `journalized_id`. |
| **user_id**          | `INT`          | **Внешний ключ (FK).** Идентификатор пользователя, который внёс это изменение или добавил комментарий.                                                                                                                          | Ссылается на `users.id`.                                   |
| **notes**            | `TEXT`         | **Текст заметки/комментария.** Если изменение сопровождалось текстовым комментарием (например, при добавлении примечания к задаче), он хранится здесь. Если изменение было только в полях, это поле может быть пустым (`NULL`). | —                                                          |
| **created_on**       | `DATETIME`     | **Дата и время создания.** Временная метка, когда было внесено изменение или добавлен комментарий.                                                                                                                              | —                                                          |


#### Таблица `journal_details`
| **Столбец**    | **Тип данных** | **Описание**                                                                                                                                                                                    | **Связи**                   |
| -------------- | -------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------- |
| **id**         | `INT`          | **Первичный ключ (PK).** Уникальный идентификатор детали изменения.                                                                                                                             | —                           |
| **journal_id** | `INT`          | **Внешний ключ (FK).** Ссылается на запись в таблице `journals`.                                                                                                                                | Ссылается на `journals.id`. |
| **property**   | `VARCHAR`      | **Тип изменённого свойства.** Обычно это:<br>- `attr` (для изменения стандартного атрибута, например, статуса) <br>- `attachment` (для добавления/удаления вложения).<br>- `relation`<br>- `cf` | —                           |
| **prop_key**   | `VARCHAR`      | **Имя изменённого атрибута.** Фактическое имя столбца или свойства, которое было изменено. _Например, `'status_id'`, `'priority_id'`, `'subject'`._                                             | —                           |
| **old_value**  | `TEXT`         | **Старое значение** изменённого атрибута.                                                                                                                                                       | —                           |
| **value**      | `TEXT`         | **Новое (текущее) значение** изменённого атрибута.                                                                                                                                              | —                           |
#####  Ключевые значения столбца `property` в `journal_details`

| **Значение property** | **Описание**                                                                                                                                                                                                                                                                                                                                                        |
| --------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **`attr`**            | **Изменение стандартного атрибута (поля).** Это наиболее распространенное значение. Оно означает, что была изменена одна из стандартных колонок в таблице объекта (`issues`, `projects` и т.д.). В этом случае столбец `prop_key` будет содержать имя измененного столбца, например, `'status_id'`, `'priority_id'`, `'subject'`, `'due_date'`, `'assigned_to_id'`. |
| **`cf`**              | **Изменение пользовательского поля (Custom Field).** Указывает, что было изменено значение одного из пользовательских полей, определенных администратором. В этом случае столбец `prop_key` будет содержать ID пользовательского поля (например, `'cf_10'`).                                                                                                        |
| **`attachment`**      | **Изменение вложения (файла).** Указывает, что к объекту было добавлено или удалено вложение. В этом случае столбец `prop_key` обычно содержит ID вложения, а `old_value` и `value` могут быть пустыми или содержать метаданные об операции.                                                                                                                        |
| **`relation`**        | **Изменение связи между объектами.** Указывает, что была создана или удалена связь с другим объектом (например, "блокирует", "связан с"). В этом случае `prop_key` часто содержит ID связи, а `old_value` и `value` могут указывать на тип операции (добавление/удаление) или ID связанной сущности.                                                                |
| **`project`**         | **Изменение, связанное с проектом.** Может использоваться для отслеживания изменений в настройках или метаданных самого проекта, если `journalized_type` в таблице `journals` — `'Project'`.                                                                                                                                                                        |
| **`watch`**           | **Изменение наблюдателей (подписчиков).** Используется для фиксации добавления или удаления пользователя из списка наблюдателей за задачей или другим объектом.                                                                                                                                                                                                     |


##### Ключевые значения `prop_key` 

###### для атрибутов (`property = 'attr'`)
Эти значения отражают изменения стандартных полей, главным образом в таблице **`issues`**:

| **prop_key**           | **Описание**                                                                                                                                | **Примечание**          |
| ---------------------- | ------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------- |
| **`status_id`**        | Изменен **статус** задачи. `old_value` и `value` будут содержать ID статусов из таблицы `issue_statuses`.                                   | Самое частое изменение. |
| **`priority_id`**      | Изменен **приоритет** задачи. `old_value` и `value` будут содержать ID приоритетов из таблицы `priorities`.                                 |                         |
| **`assigned_to_id`**   | Изменен **исполнитель** задачи. `old_value` и `value` будут содержать ID пользователей из таблицы `users`.                                  |                         |
| **`fixed_version_id`** | Изменена **целевая версия** (веха). `old_value` и `value` будут содержать ID версий из таблицы `versions`.                                  |                         |
| **`category_id`**      | Изменена **категория** задачи. `old_value` и `value` будут содержать ID категорий из таблицы `issue_categories`.                            |                         |
| **`tracker_id`**       | Изменен **трекер** (тип) задачи (например, с "Бага" на "Функцию"). `old_value` и `value` будут содержать ID трекеров из таблицы `trackers`. |                         |
| **`subject`**          | Изменена **тема** (краткое описание) задачи. `old_value` и `value` будут содержать текст.                                                   |                         |
| **`description`**      | Изменено **подробное описание** задачи. `old_value` и `value` будут содержать текст.                                                        |                         |
| **`parent_id`**        | Изменена **родительская задача** (связь иерархии). `old_value` и `value` будут содержать ID задач из таблицы `issues`.                      |                         |
| **`done_ratio`**       | Изменен **процент выполнения** задачи (`% Done`). `old_value` и `value` будут содержать числовые значения (0-100).                          |                         |
| **`start_date`**       | Изменена **дата начала** задачи. `old_value` и `value` будут содержать значения даты.                                                       |                         |
| **`due_date`**         | Изменен **срок выполнения** задачи. `old_value` и `value` будут содержать значения даты.                                                    |                         |

###### Ключевые значения для других типов свойств

При использовании других значений в столбце `property` (`cf`, `attachment`, `relation` и т.д.), столбец `prop_key` имеет иную семантику:

| **Значение property** | **Ключевой prop_key**                         | **Описание**                                                                                                                                                      |
| --------------------- | --------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **`cf`**              | **`[числовое ID поля]`** (например, **`10`**) | **ID пользовательского поля.** `prop_key` содержит числовой ID пользовательского поля (Custom Field) из таблицы `custom_fields`, значение которого было изменено. |
| **`attachment`**      | **`[числовое ID вложения]`**                  | **ID вложения.** `prop_key` содержит ID файла из таблицы `attachments`, который был добавлен или удален.                                                          |
| **`relation`**        | **`[числовое ID связи]`**                     | **ID связи.** `prop_key` содержит ID записи из таблицы `issue_relations`, которая была создана или удалена.                                                       |
| **`watch`**           | **`[числовое ID пользователя]`**              | **ID наблюдателя.** `prop_key` содержит ID пользователя из таблицы `users`, который был добавлен или удален из списка наблюдателей за задачей.                    |

#### Таблица: `users`

| **Столбец**         | **Описание**                                                |
| ------------------- | ----------------------------------------------------------- |
| **id**              | Первичный ключ (PK). Уникальный идентификатор пользователя. |
| **login**           | Логин пользователя.                                         |
| **hashed_password** | Хэш пароля.                                                 |
| **firstname**       | Имя.                                                        |
| **lastname**        | Фамилия.                                                    |
| **mail**            | Электронная почта.                                          |
| **status**          | Статус пользователя: 1- активный; 2-заблокирован; 3- неактивизированный               |


#### Таблица `members`
содержит записи об участии каждого пользователя в каждом проекте.

| **Столбец** | **Описание**                        |
| ----------- | ----------------------------------- |
| **id**          | PK                                  |
| **user_id**     | FK указывающий на **`users.id`**    |
| **project_id**  | FK указывающий на **`projects.id`** |
| **created_on**            | Дата добавления пользователя в проект.                                    |


#### Таблица `member_roles`
связывает запись об участии с конкретными ролями.

| **Столбец**   | **Описание**                      |
| ------------- | --------------------------------- |
| **member_id** | FK, указывает на **`members.id`** |
| **role_id**   | FK на **roles.id**                |



#### Таблица `custom_values`
| **Столбец**         | **Тип данных** | **Описание**                                                                                                                                                                     |
| ------------------- | -------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **id**              | `INT`          | **Первичный ключ (PK).** Уникальный идентификатор записи значения.                                                                                                               |
| **customized_type** | `VARCHAR`      | **Тип объекта, которому принадлежит значение.** Определяет, к какой основной таблице Redmine относится это значение. _Примеры: `'Issue'`, `'Project'`, `'User'`, `'TimeEntry'`._ |
| **customized_id**   | `INT`          | **Идентификатор объекта.** ID записи в таблице, указанной в `customized_type`. _Например, если `customized_type` — `'Issue'`, то `customized_id` — это `issues.id`._             |
| **custom_field_id** | `INT`          | **Внешний ключ (FK).** Идентификатор определения пользовательского поля.                                                                                                         |
| **value**           | `TEXT`         | **Значение пользовательского поля.** Фактическое сохраненное значение, введенное пользователем (например, текст, число, дата, ID выбранного элемента).                           |



### Связи между таблицами

Связи в Redmine обычно устанавливаются с помощью **внешних ключей (FK)**, которые ссылаются на **первичные ключи (PK)** других таблиц.

| **Таблица 1**    | **Связующий столбец (FK)** | **Таблица 2 (PK)** | **Тип связи**     | **Описание**                                    |
| ---------------- | -------------------------- | ------------------ | ----------------- | ----------------------------------------------- |
| **issues**       | `project_id`               | **projects**       | _Многие к одному_ | Каждая задача принадлежит одному проекту.       |
| **issues**       | `tracker_id`               | **trackers**       | _Многие к одному_ | Каждая задача имеет один тип.                   |
| **issues**       | `status_id`                | **issue_statuses** | _Многие к одному_ | Каждая задача имеет один статус.                |
| **issues**       | `author_id`                | **users**          | _Многие к одному_ | Каждая задача имеет одного автора.              |
| **issues**       | `assigned_to_id`           | **users**          | _Многие к одному_ | Каждая задача имеет одного исполнителя.         |
| **versions**     | `project_id`               | **projects**       | _Многие к одному_ | Каждая версия принадлежит одному проекту.       |
| **members**      | `user_id`                  | **users**          | _Многие к одному_ | Участник является пользователем.                |
| **members**      | `project_id`               | **projects**       | _Многие к одному_ | Участник принадлежит одному проекту.            |
| **member_roles** | `member_id`                | **members**        | _Многие к одному_ | Роли привязаны к участнику проекта.             |
| **member_roles** | `role_id`                  | **roles**          | _Многие к одному_ | Роли привязаны к определению роли.              |
| **journals**     | `journalized_id`           | **issues**         | _Многие к одному_ | Журнал изменений относится к конкретной задаче. |

