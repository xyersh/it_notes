
### Глосарий
- **Коллекция** - 
- **Документ** - 

### Установка из  docker-образа 
`docker run -d --name <MONGO_CONTAINER> -p 27017:27017 -v <NEW_VOLUME> --network <DOCKER_NETWORK> -e MONGO_INITDB_ROOT_USERNAME=<USER> -e MONGO_INITDB_ROOT_PASSWORD=<PASWORD> <MONGO_IMAGE>`


### Запуск контейнера
`docker exec -it <MONGO_CONTAINER> mongosh "mongodb://<USER>:<PASSWORD>@127.0.0.1:27017"`



### **Основные команды**
- `db.<collection_name>.insertOne(<JSON_OBJ>)`: вставляет **один** документ в коллекцию.
- `db.<collection>.insertMany(<JSON_ARR>)`: вставляет **несколько** документов.
- `db.<collection_name>.find([<CONDITION>])`: выполняет поиск документов. Можно использовать без параметров для получения всех документов в коллекции или с запросами для фильтрации.
	- `db.<collection_name>.find({age: 40})` - искать документы, у которых ключ "age" = 40
	- `db.<collection_name>.find({age: {$lt: 40}})` - искать документы, у которых ключ "age" < 40
	-  `db.<collection_name>.find({age: {$lte: 40}})` - искать документы, у которых ключ "age" <= 40
	-  `db.<collection_name>.find({age: {$gt: 40}})` - искать документы, у которых ключ "age" > 40
	-  `db.<collection_name>.find({age: {$gte: 40}})` - искать документы, у которых ключ "age" >= 40
	- `db.<collection_name>.find({age: 40},{name: 1})` - показать только поле "name" + спецполе  `"_id"`
	- `db.<collection_name>.find({age: 40},{name: 1, _id: 0})` - показать только поле "name" без спецполя  `"_id"`
	- `db.<collection_name>.find({age: {$in: [40, 38]})` -  показать документы, у ноторых значения поля `age` имеют значения из списка (37, 40)
	- `db.<collection_name>.find({age: {$gte: 18, $lte: 60})` - поиск с фильтрацией по значению age относящегося к диапазону от 18 до 60 лет.
	- `db.<collection_name>.find({$and: {age: {$gt: 20}}, {email: {$exist: false}}})` - демотстрация AND. поиск записей у которых возраст юольше 20 И отсутствует почтовый ящик. В случае AND `$and:` омжно не писать и перечислить всем условия через запятую. 
	- `db.<collection_name>.find({$or: {age: {$gt: 20}}, {email: {$exist: false}}})` - демотстрация OR. поиск записей у которых возраст юольше 20 ИЛИ отсутствует почтовый ящик.
	- `db.collection.find({$not: {name: "Dmitriy"}})` - демонстрация НЕ. поиск записей, у которых поле `name` != "Dmitriy". 
- `db.<collection_name>.find([<CONDITION>]).sort(<PARAM>)` - сортировка найденных документов. В него передаётся объект, где `1` означает **сортировку по возрастанию**, а `-1` — **по убыванию**.
-  `db.collection.find().sort({name: 1})` — сортирует документы по полю `name` в алфавитном порядке.
		- `db.collection.find().sort({date: -1})` — сортирует по полю `date` от самого нового к самому старому.
- `db.<collection_name>.find([<CONDITION>]).limit(<SIZE>)` используется для ограничения количества возвращаемых документов. В него передаётся число, указывающее, сколько документов нужно получить.
		- `db.collection.find().limit(10)` — возвращает только первые `10` документов.
		- `db.collection.find().sort({views: -1}).limit(5)` — находит `5` самых просматриваемых документов.
- `db.<collection_name>.find([<CONDITION>]).skip(<ROWS>)` используется для пропуска определённого количества документов в выборке. Он часто применяется вместе с `limit()` для реализации пагинации.
		- `db.collection.find().skip(5)` — пропускает первые `5` документов и возвращает все остальные.
			- `db.collection.find().limit(10).skip(10)` — используется для получения второй "страницы" из `10` документов (пагинация).
- `db.getCollection("COLLECTION_NAME").find({})` - аналогична предыдущей функции
- `db.<collection_name>.findOne(<CONDITION>)`: возвращает **первый** найденный документ.
- `db.<collection_name>.updateOne()`: изменяет **один** документ, соответствующий условию.
- `db.<collection_name>.updateMany()`: изменяет **все** документы, соответствующие условию.
- `db.<collection_name>.deleteOne()`: удаляет **один** документ.
- `db.<collection_name>.deleteMany()`: удаляет **все** документы, соответствующие условию.
- `db.<collection_name>.aggregate()`: используется для выполнения сложных операций, таких как группировка, фильтрация и агрегация данных.


### **Команды для управления базой данных и коллекциями**

- `show dbs`: показывает список всех баз данных.
- `use <database_name>`: переключает контекст на указанную базу данных. Если базы данных нет, она создаётся.
- `show collections`: показывает список всех коллекций в текущей базе данных.
- `db.<collection_name>.drop()`: удаляет коллекцию.
- `db.dropDatabase()`: удаляет текущую базу данных.

### **Дополнительные команды**
- `db.<collection_name>.countDocuments([CONDITION])`: подсчитывает количество документов, соответствующих условию.
- `db.<collection_name>.estimatedDocumentCount()`: возвращает приблизительное количество документов в коллекции, что быстрее, чем `countDocuments()`, но менее точное.
- `db.<collection_name>.createIndex()`: создаёт индекс для поля или нескольких полей, что значительно ускоряет поиск.
- `db.<collection_name>.distinct()`: возвращает массив уникальных значений для указанного поля.