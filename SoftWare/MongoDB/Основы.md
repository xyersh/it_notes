
### Глоссарий
- **База данных** — это физический контейнер для коллекций. Один экземпляр MongoDB может содержать несколько баз данных, каждая из которых имеет свой собственный набор коллекций и прав доступа.
- **Коллекция** — это группа документов. Она похожа на таблицу в реляционной базе данных. Коллекция не требует строгой схемы, что позволяет хранить в ней документы с разными наборами полей.
- **Документ** — это основная единица данных в MongoDB. По сути, это набор пар "ключ-значение", аналогичный строке в реляционной базе данных. Документы обладают гибкой схемой, что означает, что поля могут быть разными в разных документах одной коллекции.
- **BSON** (Binary JSON) — это бинарный формат сериализации, который MongoDB использует для хранения документов. Он похож на JSON, но более эффективен и поддерживает больше типов данных, например, `Date` и `Binary data`.
- **\_id** — это уникальный идентификатор каждого документа в коллекции. Если вы не укажете его при вставке документа, MongoDB автоматически сгенерирует `_id` для вас.
- **Индексы** — это специальные структуры данных, которые улучшают производительность запросов. Они работают аналогично индексам в реляционных базах данных, позволяя быстро находить документы по определенным полям.
- **Встроенные документы и массивы** -В MongoDB можно вкладывать документы друг в друга и использовать массивы. Это позволяет моделировать сложные иерархические отношения в одном документе, что часто удобнее, чем использование нескольких таблиц и `JOIN` в реляционных БД. Например, документ `order` может содержать массив `items`.
- **Агрегация** - это процесс обработки данных для получения вычисленных результатов. В MongoDB для этого используется **фреймворк агрегации** (`Aggregation Framework`), который позволяет выполнять сложные операции, такие как группировка, фильтрация и трансформация данных, похожие на `GROUP BY` в SQL.
- **Схемы и валидация** - Хотя MongoDB является **NoSQL** базой данных без строгой схемы, можно использовать **валидацию схемы** для обеспечения определенной структуры данных в коллекции. Это позволяет настраивать правила для полей, чтобы убедиться, что они имеют ожидаемый тип и формат.
- **Операторы** - идентификаторы начинающиеся с символа **$** и служащие для нужд поиска, обновления, агрегации, в зависимости от контекста их использования

### Установка из  docker-образа 
`docker run -d --name <MONGO_CONTAINER> -p 27017:27017 -v <NEW_VOLUME> --network <DOCKER_NETWORK> -e MONGO_INITDB_ROOT_USERNAME=<USER> -e MONGO_INITDB_ROOT_PASSWORD=<PASWORD> <MONGO_IMAGE>`


### Запуск контейнера
`docker exec -it <MONGO_CONTAINER> mongosh "mongodb://<USER>:<PASSWORD>@127.0.0.1:27017"`



### **Основные команды**
- `db.<collection_name>.insertOne(<JSON_OBJ>)`: вставляет **один** документ в коллекцию.
- `db.<collection>.insertMany(<JSON_ARR>)`: вставляет **несколько** документов.
- `db.<collection_name>.find([<CONDITION>])`: выполняет поиск документов. Можно использовать без параметров для получения всех документов в коллекции или с запросами для фильтрации.
	- `sort(<PARAM>)` - сортировка найденных документов. В него передаётся объект, где `1` означает **сортировку по возрастанию**, а `-1` — **по убыванию**.
		-  `db.collection.find().sort({name: 1})` — сортирует документы по полю `name` в алфавитном порядке.
		- `db.collection.find().sort({date: -1})` — сортирует по полю `date` от самого нового к самому старому.
	- `limit()` используется для ограничения количества возвращаемых документов. В него передаётся число, указывающее, сколько документов нужно получить.
		- `db.collection.find().limit(10)` — возвращает только первые `10` документов.
		- `db.collection.find().sort({views: -1}).limit(5)` — находит `5` самых просматриваемых документов.
	- `skip()` используется для пропуска определённого количества документов в выборке. Он часто применяется вместе с `limit()` для реализации пагинации.
		- `db.collection.find().skip(5)` — пропускает первые `5` документов и возвращает все остальные.
			- `db.collection.find().limit(10).skip(10)` — используется для получения второй "страницы" из `10` документов (пагинация).
- `db.getCollection("COLLECTION_NAME").find({})` - аналогична предыдущей функции
- `db.<collection_name>.findOne(<CONDITION>)`: возвращает **первый** найденный документ.
- `db.<collection_name>.updateOne()`: изменяет **один** документ, соответствующий условию.
- `db.<collection_name>.updateMany()`: изменяет **все** документы, соответствующие условию.
- `db.<collection_name>.deleteOne()`: удаляет **один** документ.
- `db.<collection_name>.deleteMany()`: удаляет **все** документы, соответствующие условию.
- `db.<collection_name>.aggregate()`: используется для выполнения сложных операций, таких как группировка, фильтрация и агрегация данных.


### **Команды для управления базой данных и коллекциями**

- `show dbs`: показывает список всех баз данных.
- `use <database_name>`: переключает контекст на указанную базу данных. Если базы данных нет, она создаётся.
- `show collections`: показывает список всех коллекций в текущей базе данных.
- `db.<collection_name>.drop()`: удаляет коллекцию.
- `db.dropDatabase()`: удаляет текущую базу данных.

### **Дополнительные команды**
- `db.<collection_name>.countDocuments()`: подсчитывает количество документов, соответствующих условию.
- `db.<collection_name>.estimatedDocumentCount()`: возвращает приблизительное количество документов в коллекции, что быстрее, чем `countDocuments()`, но менее точное.
- `db.collection.createIndex()`: создаёт индекс для поля или нескольких полей, что значительно ускоряет поиск.
- `db.collection.distinct()`: возвращает массив уникальных значений для указанного поля.