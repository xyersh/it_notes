### Концепция прав в мире Unix (Linux, macOS)

Чтобы понять числовой код, нужно сперва понять саму систему прав, которая пришла к нам из мира Unix-подобных систем. Это до гениальности простая и мощная концепция.

Права доступа определяются для трех категорий пользователей:

1. **User (Владелец)**: `u` — Тот, кто создал файл. Царь и бог этого файла.
2. **Group (Группа)**: `g` — Группа пользователей, к которой принадлежит владелец. Эдакий "ближний круг" или "королевский двор".
3. **Others (Остальные)**: `o` — Все остальные пользователи в системе. Простой люд.

Для каждой из этих категорий можно установить три основных права:

1. **Read (Чтение)**: `r` — Право открывать и читать содержимое файла.
2. **Write (Запись)**: `w` — Право изменять, перезаписывать или удалять файл.
3. **Execute (Исполнение)**: `x` — Право запустить файл как программу или скрипт.

### Магия чисел: Как кодируются разрешения

А теперь самое интересное — как `r`, `w` и `x` превращаются в цифры. Здесь используется **восьмеричная система счисления (octal)**. Каждому праву присваивается числовое значение, являющееся степенью двойки:

- **r** (чтение) = **4** (в двоичной системе `100`)
- **w** (запись) = **2** (в двоичной системе `010`)
- **x** (исполнение) = **1** (в двоичной системе `001`)

Чтобы получить итоговую цифру для одной категории пользователей (например, для Владельца), мы просто **складываем** значения нужных нам прав.

|Права|Сумма|Цифра|Описание|
|:--|:--|:--|:--|
|`---`|0 + 0 + 0|**0**|Никаких прав. "Не трогать!"|
|`--x`|0 + 0 + 1|**1**|Только исполнение.|
|`-w-`|0 + 2 + 0|**2**|Только запись.|
|`-wx`|0 + 2 + 1|**3**|Запись и исполнение.|
|`r--`|4 + 0 + 0|**4**|Только чтение.|
|`r-x`|4 + 0 + 1|**5**|Чтение и исполнение.|
|`rw-`|4 + 2 + 0|**6**|Чтение и запись.|
|`rwx`|4 + 2 + 1|**7**|Полный доступ. "All inclusive".|

Экспортировать в Таблицы

Теперь мы собираем эти цифры вместе в формате `[Владелец][Группа][Остальные]`.

В Go, чтобы указать, что число восьмеричное, перед ним ставится ноль. **`0`**.

#### Примеры:

#### Пример 1: `0644` (самый частый для обычных файлов)

- **`0`**: Это просто указатель, что число восьмеричное.
- **`6` (Владелец)**: `4 + 2` = `rw-` (Чтение и Запись). Владелец может читать и изменять файл.
- **`4` (Группа)**: `4` = `r--` (Только чтение). Члены группы могут только читать файл.
- **`4` (Остальные)**: `4` = `r--` (Только чтение). Все остальные тоже могут только читать.

**Идеально для текстовых файлов, конфигов, картинок.**

```go
// Создаем файл, который владелец может менять, а все остальные - только читать.
file, err := os.OpenFile("config.json", os.O_CREATE|os.O_WRONLY, 0644)
```


#### Пример 2: `0755` (самый частый для директорий и исполняемых файлов)

- **`0`**: Восьмеричный формат.
- **`7` (Владелец)**: `4 + 2 + 1` = `rwx` (Чтение, Запись, Исполнение). Владелец может делать с файлом всё.
- **`5` (Группа)**: `4 + 1` = `r-x` (Чтение и Исполнение). Группа может читать и запускать.
- **`5` (Остальные)**: `4 + 1` = `r-x` (Чтение и Исполнение). Остальные тоже могут читать и запускать.

**Идеально для скриптов, программ или утилит, которые должны запускаться другими пользователями.**

```go
// Создаем скрипт, который владелец может менять, а все остальные - читать и запускать.
scriptFile, err := os.OpenFile("deploy.sh", os.O_CREATE|os.O_WRONLY, 0755)
```

### Важный нюанс: `umask`

В реальном мире есть еще один игрок — системная переменная `umask` (user file-creation mode mask). Это "маска", которая _запрещает_ определенные права при создании файла.

Система берет запрошенные тобой права (например, `0777`) и "вычитает" из них права, указанные в `umask`.

Например, если `umask` равна `0022`:

- Ты просишь `0666` (`rw-rw-rw-`).
- `umask` запрещает запись для Группы (`0020`) и Остальных (`0002`).
- Реальные права будут `0644` (`rw-r--r--`).

Это механизм безопасности, чтобы программы по умолчанию не создавали файлы, доступные на запись всем подряд. Тебе, как программисту, обычно достаточно задать "идеальные" права, а система сама скорректирует их с помощью `umask`.