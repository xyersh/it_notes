Функция `init()` в Go — это специальная функция, которая автоматически вызывается **до** входа в `main()` и используется для **инициализации пакета**. Она не принимает аргументов и не возвращает значений.


## Как работает `init()`?

1. **Выполняется один раз** при запуске программы (для каждого пакета).
2. Вызывается **после** инициализации глобальных переменных, но **до** `main()`.
3. Может быть определена **многократно** в одном файле или в разных файлах одного пакета.
4. Порядок выполнения:
    - Сначала инициализируются глобальные переменные.
    - Затем выполняются все `init()`-функции **в порядке следования файлов**, переданных компилятору:
		- В рамках приложения очередность выполнения **init()** происходит в согласно лексикографическому порядку названий пакетов
		- В рамках одного пакета выполнение **Init()** происходит согласно лексикографическому порядку имён файлов.
		- В рамках одного файла (в одном файле МОЖЕТ содердаться несколько фукций **init()**) выполнение ф-ций **init()** происходит согласно порядку их объявлений.
    - Если в пакете есть зависимости от других пакетов, то `init()` зависимых пакетов выполняются **раньше**.

## Мотивация использования Init()

- Инициализация глобального состояния (например, настройка логгера, конфигурации).
- Регистрация компонентов (например, HTTP-хендлеров, кодеков, плагинов).
- Проверка окружения или предусловий (например, наличие переменных окружения).
- Автоматическая регистрация фабрик или реализаций (часто используется с паттерном **Registry** или **Plugin**).




## Корнер-кейсы и потенциальные проблемы

1. **Непредсказуемый порядок выполнения `init()` между файлами**  
    Если у вас несколько файлов в пакете, и каждый содержит `init()`, порядок зависит от того, в каком порядке Go обрабатывает файлы (обычно — по имени). Это может привести к ошибкам, если одна `init()` зависит от другой.
2. **Скрытое поведение / "магия"**  
    Поскольку `init()` вызывается автоматически, новички могут не замечать её существование, что затрудняет понимание потока программы.
3. **Инициализация с побочными эффектами**  
    Например, изменение глобального состояния или подключение к внешним ресурсам в `init()` делает код сложным для тестирования и усложняет изоляцию.
4. **Паника в `init()` завершает программу**  
    Если `init()` вызывает `panic`, программа аварийно завершится **до** `main()`. Это может быть трудно отладить, особенно если паника происходит в зависимом пакете.
5. **Циклические зависимости при инициализации**  
    Если два пакета зависят друг от друга и оба используют `init()` для инициализации, возможна ошибка компиляции или неопределённое поведение.
6. **Использование `init()` для регистрации в глобальных мапах/слайсах**  
    Это популярный паттерн (например, в `encoding/gob`), но может привести к гонкам данных, если позже эти структуры модифицируются конкурентно без синхронизации.
7. **Множество `init()` в одном пакете усложняют читаемость**  
    Особенно если они распределены по разным файлам — сложно отследить, что и когда инициализируется.