
**Кэш-линия** (или **блок кэша**) — это минимальная единица данных, которая передается между **основной памятью** (RAM) и **кэш-памятью** (CPU cache).

## Основные характеристики и принцип работы

### 1. Единица передачи данных
- Когда процессор запрашивает данные из основной памяти, он не считывает по одному байту. Вместо этого он считывает сразу целый блок данных, равный размеру кэш-линии, и помещает его в кэш.
- Если данные, которые запросил процессор, отсутствуют в кэше (**промах кэша**), то из основной памяти в кэш будет загружена вся кэш-линия, содержащая эти данные, а также их ближайшие соседи.
    

### 2. Размер кэш-линии

- Размер кэш-линии фиксирован и определяется архитектурой процессора. 
- Наиболее распространенные размеры в современных процессорах — **64 байта**. Иногда встречаются 32 или 128 байт.
- Например, если кэш-линия имеет размер 64 байта, а процессор запросил 1 байт данных, то он получит этот байт и 63 соседних байта.
    

### 3. Эксплуатация пространственной локальности

- Использование кэш-линий основано на принципе **пространственной локальности**. Этот принцип гласит, что если процессор обратился к определенному адресу памяти, то, вероятно, вскоре он обратится и к соседним адресам.
- Загружая сразу целую линию (64 байта), процессор с большой вероятностью заранее загружает данные, которые ему понадобятся в ближайшем будущем, тем самым **снижая количество обращений** к медленной основной памяти.
    

### 4. Структура кэш-линии

Каждая кэш-линия обычно состоит из нескольких частей:

- **Блок данных:** Сами 64 байта данных, считанных из основной памяти.
- **Тег (Tag):** Часть адреса, которая указывает, какой именно блок основной памяти в данный момент хранится в этой кэш-линии.
- **Флаги (Bits):** Несколько управляющих бит, таких как:
    - **Бит валидности (Valid Bit):** Указывает, содержатся ли в кэш-линии актуальные данные (была ли она заполнена).
    - **Бит "грязности" (Dirty Bit):** Указывает, были ли данные в кэш-линии изменены процессором (**записаны**), но еще не записаны обратно в основную память.